# git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

# UI
set -g @black0 "#12120f"
set -g @black1 "#0d0c0c"
set -g @black2 "#282727"
set -g @black3 "#393836"
set -g @black4 "#181816"
set -g @white "#c5c9c5"
set -g @red "#c4746e"
set -g @yellow "#c4b28a"
set -g @grey "#a6a69c"
set -g @tmux_banner "#[bg=#{@black3},fg=#{@white}] TMUX #[bg=default,fg=default]"
set -g @session_banner "#[bg=#{@black2},fg=#{@white}] #{session_name} #[bg=default,fg=default]"
set -g @hostname "#[bg=#{@black3},fg=#{@white}] #{host} #[bg=default,fg=default]"
set -g @zoom_status "#[bg=#{@red},fg=#{@black1}]#{?window_zoomed_flag, ZOOMED ,}#[bg=default,fg=default]"
set -g @prefix_status "#[bg=#{@black2},fg=#{@white}]#{?client_prefix, ^X ,}#[bg=default,fg=default]"
set -g @date "#[bg=#{@black2},fg=#{@white}] %d/%b/%y #[bg=default,fg=default]"
set -g @time "#[bg=#{@black3},fg=#{@white}] %l:%M %p #[bg=default,fg=default]"
set -g @basename_path "#[bg=#{@black3},fg=#{@white}] #(basename #{pane_current_path}) #[bg=default,fg=default]"
set -g detach-on-destroy no-detached
set -g status-left "#{E:@tmux_banner}#{E:@session_banner}#{E:@hostname}#{E:@zoom_status}#{E:@prefix_status}"
set -g status-right "#{E:@time}#{E:@date}#{E:@basename_path}"
set -g status-right-length 60
set -g status-position top
set -g status-justify absolute-centre
set -g status-left-length 60
set -g status-style bg="#{@black2}",fg="#{@white}"
set -g status-right-style bg=terminal,fg=terminal
set -g status-left-style bg=terminal,fg=terminal
set -g window-status-format "#[bg=#{@black2},fg=#{@white}] #I #W "
set -g window-status-current-format "#[bg=#{@black4},fg=#{@white}] #I #W "
set -g pane-border-lines heavy
set -g pane-border-indicators colour
set -g pane-border-format "#{pane_current_path}"
set -g pane-border-style fg="#{@black3}"
set -g pane-active-border-style fg="#{@yellow}"
set -g pane-border-status off
set -g popup-style bg="#{@black2}"
set -g popup-border-style fg="#{@black2}",bg="#{@black2}"
set -g menu-style bg="#{@black2}"
set -g menu-selected-style bg="#{@red}",fg="#{@black2}"
set -g menu-border-style fg="#{@black2}",bg="#{@black2}"
set -g message-style bg="#{@red}",fg="#{@black2}"
set-environment -gF FZF_DEFAULT_OPTS \
  '--ellipsis=... \
  --layout=reverse \
  --prompt="  " \
  --height="100%" \
  --header-first \
  --no-separator \
  --preview-window=border-none \
  --border=none \
  --info=inline-right \
  --pointer="" \
  --no-bold \
  --no-header-lines-border \
  --color="bg:#{@black2},gutter:#{@black2},pointer:#{@black2},hl:#{@white},hl+:#{@white},bg+:#{@red},fg:#{@white},fg+:#{@black2},header:#{@white},prompt:#{@white},query:#{@white}" \
  --cycle \
  --bind="down:preview-down,up:preview-up" \
  --no-scrollbar'


# CONFIGURATION
set -sg escape-time 0
set -g prefix C-x
set -g mouse on
set -g status-keys vi
set -g mode-keys vi
set -g renumber-windows on
set -g base-index 1
set -g display-time 0
set -g main-pane-width "50%"
set -g main-pane-height "50%"
set -g history-limit 10000

# KEYBINDINGS
bind C-x send-prefix
bind '{' switch-client -p
bind '}' switch-client -n
bind c new-window -a -c "#{pane_current_path}"
bind v split-window -c "#{pane_current_path}" -h
bind s split-window -c "#{pane_current_path}" -v
bind l select-pane -R
bind h select-pane -L
bind k select-pane -U
bind j select-pane -D
bind J swap-pane -U
bind K swap-pane -D
bind H swap-window -t -1\; select-window -t -1
bind L swap-window -t +1\; select-window -t +1
bind 0 run-shell ~/.local/scripts/bin/tmux_select_last_window.sh
bind '|' resize-pane -Z
bind N new-session
bind C-j resize-pane -D 10
bind C-k resize-pane -U 10
bind C-l resize-pane -R 10
bind C-h resize-pane -L 10
bind C-o switch-client -l
bind C-a select-window -l
bind C-n select-window -n
bind C-p select-window -p
bind . run-shell ~/.local/scripts/bin/tmux_swap_pane.sh
bind f display-panes -d 0
bind Space run-shell ~/.local/scripts/bin/tmux_run_menu.sh
bind C-Space run-shell ~/.local/scripts/bin/tmux_gemma.sh
bind o display-popup -h 10 -y 15% -EE ~/.local/scripts/bin/tmux_switch_session.sh
bind + display-popup -h 10 -y 15% -EE ~/.local/scripts/bin/tmux_layout_selector.sh
bind m run-shell ~/.local/scripts/bin/tmux_spotify.sh
bind ñ run-shell ~/.local/scripts/bin/tmux_goto_todo.sh
bind R run-shell ~/.local/scripts/bin/tmux_reload.sh
bind , command-prompt -p "Rename window:" "rename-window -t . '%%'"
bind ";" command-prompt -p "Rename session:" "rename-session -t . '%%'"
bind -T copy-mode-vi Escape send-keys -X cancel
bind -T copy-mode-vi y send-keys -X copy-selection
bind -T copy-mode-vi g send-keys -X top-line
bind -T copy-mode-vi G send-keys -X bottom-line
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi V send-keys -X select-line
bind -T copy-mode-vi / command-prompt -T search -p "(search up)" { send-keys -X search-backward "%%" }
bind -T copy-mode-vi ? command-prompt -T search -p "(search down)" { send-keys -X search-forward "%%" }

set -g @continuum-restore 'on'
set -g @continuum-save-interval '15'

set -g @resurrect-processes 'false'

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

run '~/.tmux/plugins/tpm/tpm'
